<!-- Connexion -->
<div class="connexion" [style.filter]="isRegisterModalOpen ? 'blur(4px)' : 'none'">
  <div class="connexion-wrapper">
    <div class="logo">
      <img src="assets/G.png" alt="Logo Simplon" />
    </div>

    <div class="form-and-buttons-container">
      <form class="auth-form" (ngSubmit)="onLoginSubmit()">
        <h2>Connexion</h2>

        <div class="form-group">
          <label for="login-email">Email</label>
          <input type="email" id="login-email" name="loginEmail" placeholder="Votre email" required
            [(ngModel)]="loginData.email" />
        </div>

        <div class="form-group">
          <label for="login-password">Mot de passe</label>
          <input type="password" id="login-password" name="loginPassword" placeholder="Votre mot de passe" required
            [(ngModel)]="loginData.password" />
          <a href="#" class="forgot-password">Mot de passe oubli√© ?</a>
        </div>

        @if (loginError) {
        <p class="error-message">{{ loginError }}</p>
        }

        <div class="buttons">
          <button type="submit">Se connecter</button>
          <button type="button" (click)="openRegisterModal()">S'inscrire</button>
        </div>
      </form>
    </div>
  </div>
</div>


<!-- MODALE D'INSCRIPTION -->
<!-- MODALE D'INSCRIPTION -->
@if (isRegisterModalOpen) {
<div class="modal-overlay" (click)="closeRegisterModal()" (keydown)="closeRegisterModal()">
  <div class="modal-content" (click)="$event.stopPropagation()" (keydown)="closeRegisterModal()">
    <button class="modal-close-button" (click)="closeRegisterModal()" aria-label="Fermer la modale">
      √ó
    </button>

    @switch (registrationStep) {
    @case ('roleSelection') {
    <div class="modal-header">
      <h2>Cr√©er un compte</h2>
      <p>Veuillez choisir votre r√¥le :</p>
    </div>
    <div class="modal-body role-selection-modal">
      <button type="button" class="role-button" (click)="selectRole('apprenant')">
        <span class="role-icon">üéì</span>
        Je suis Apprenant
      </button>
      <button type="button" class="role-button" (click)="selectRole('formateur')">
        <span class="role-icon">üßë‚Äçüè´</span>
        Je suis Formateur
      </button>
    </div>
    }
    @case ('formApprenant') {
    <div class="modal-header">
      <h2>Inscription Apprenant</h2>
      <button type="button" class="back-button" (click)="backToRoleSelection()">
        ‚Üê Changer de r√¥le
      </button>
    </div>

    <form class="auth-form modal-form" (ngSubmit)="onRegisterApprenantSubmit()">
      <div class="form-group">
        <label for="firstname">Pr√©nom</label>
        <input type="text" id="firstname" name="firstname" required [(ngModel)]="registerApprenantData.firstname" />
      </div>

      <div class="form-group">
        <label for="lastname">Nom</label>
        <input type="text" id="lastname" name="lastname" required [(ngModel)]="registerApprenantData.lastname" />
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required [(ngModel)]="registerApprenantData.email" />
      </div>

      <div class="form-group">
        <label for="password">Mot de passe</label>
        <input type="password" id="password" name="password" required [(ngModel)]="registerApprenantData.password" />
      </div>

      <div class="form-group">
        <label for="genre">Genre</label>
        <select id="genre" name="genre" required [(ngModel)]="registerApprenantData.genre">
          <option value="">-- S√©lectionnez --</option>
          <option value="masculin">Masculin</option>
          <option value="feminin">F√©minin</option>
          <option value="nsp">Ne se prononce pas</option>
        </select>
      </div>

      <div class="form-group">
        <label for="aisance">Aisance en fran√ßais</label>
        <select id="aisance" name="aisance" required [(ngModel)]="registerApprenantData.aisance_fr">
          <option value="0">-- S√©lectionnez --</option>
          <option *ngFor="let n of [1,2,3,4]" [value]="n">{{n}}</option>
        </select>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" [(ngModel)]="registerApprenantData.ancien_dwwm" name="ancien_dwwm" />
          Ancien DWWM ?
        </label>
      </div>

      <div class="form-group">
        <label for="niveau">Niveau technique</label>
        <select id="niveau" name="niveau" required [(ngModel)]="registerApprenantData.niveau_tech">
          <option value="0">-- S√©lectionnez --</option>
          <option *ngFor="let n of [1,2,3,4]" [value]="n">{{n}}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="profil">Profil</label>
        <select id="profil" name="profil" required [(ngModel)]="registerApprenantData.profil">
          <option value="">-- S√©lectionnez --</option>
          <option value="timide">Timide</option>
          <option value="reserve">R√©serv√©</option>
          <option value="alaise">√Ä l‚Äôaise</option>
        </select>
      </div>

      <div class="form-group">
        <label for="age">√Çge</label>
        <input type="number" id="age" name="age" min="1" max="99" required [(ngModel)]="registerApprenantData.age" />
      </div>

      @if (registerError) {
      <p class="error-message">{{ registerError }}</p>
      } @if (registerSuccess) {
      <p class="success-message">{{ registerSuccess }}</p>
      }

      <div class="buttons">
        <button type="submit">Cr√©er mon compte Apprenant</button>
      </div>
    </form>
    }



@case ('formFormateur') {
  <div class="modal-header">
    <h2>Inscription Formateur</h2>
    <button type="button" class="back-button" (click)="backToRoleSelection()">
      ‚Üê Changer de r√¥le
    </button>
  </div>

  <form class="auth-form modal-form" (ngSubmit)="onRegisterFormateurSubmit()">
    <div class="form-group">
      <label for="firstname">Pr√©nom</label>
      <input
        type="text"
        id="firstname"
        name="firstname"
        required
        [(ngModel)]="registerFormateurData.firstname"
      />
    </div>

    <div class="form-group">
      <label for="lastname">Nom</label>
      <input
        type="text"
        id="lastname"
        name="lastname"
        required
        [(ngModel)]="registerFormateurData.lastname"
      />
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        name="email"
        required
        [(ngModel)]="registerFormateurData.email"
      />
    </div>

    <div class="form-group">
      <label for="password">Mot de passe</label>
      <input
        type="password"
        id="password"
        name="password"
        required
        [(ngModel)]="registerFormateurData.password"
      />
    </div>

    @if (registerError) {
    <p class="error-message">{{ registerError }}</p>
    } @if (registerSuccess) {
    <p class="success-message">{{ registerSuccess }}</p>
    }

    <div class="buttons">
      <button type="submit">Cr√©er mon compte Formateur</button>
    </div>
  </form>
} }
    <!-- Fin du @switch -->
  </div>
  <!-- Fin de .modal-content -->
</div>
<!-- Fin de .modal-overlay -->
}
<!-- Fin du @if pour isRegisterModalOpen -->